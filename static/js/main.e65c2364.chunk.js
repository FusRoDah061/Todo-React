(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],[,,,,,,,,function(e,t,a){},,,,,function(e,t,a){e.exports=a(30)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(9),r=a.n(i);a(18);var o=function(){return n.a.createElement("div",{className:"app-header"},n.a.createElement("h1",{className:"app-title"},"To-Do React"))},l=a(2),c=a(3),u=a(1),d=a(5),h=a(4);a(19);var k=function(e){var t="js-subtask-".concat(e.subtask.id),a=1===e.subtask.status;return n.a.createElement("li",{className:"subtask-item",key:e.subtask.id},e.removable&&n.a.createElement("button",{className:"button subtask-item-remove",onClick:function(){e.removable&&e.onRemove(e.subtask)}},"\u274c"),n.a.createElement("label",{htmlFor:t,title:e.subtask.description,className:a?"subtask-item--done":""},n.a.createElement("input",{id:t,type:"checkbox",onChange:function(t){e.onTaskChange&&e.onTaskChange({checked:t.target.checked,subtask:e.subtask})},disabled:e.disabled,checked:a}),e.subtask.description))};a(20);var p=function(e){var t=e.tasks.map((function(t){return n.a.createElement(k,{subtask:t,onTaskChange:e.onTaskChange,onRemove:e.onRemove,disabled:e.disabled,key:t.id,removable:e.removableItems})}));return n.a.createElement("ul",{className:"subtask-list"},t)},b=(a(21),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e={width:"".concat(100*this.props.value/this.props.max,"%")};return n.a.createElement("div",{className:"progress-bar"},n.a.createElement("div",{className:"progress-bar-progress",style:e}))}}]),a}(n.a.Component)),m=(a(22),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={subtaskCollapse:!0},s.toggleSubstaskList=s.toggleSubstaskList.bind(Object(u.a)(s)),s}return Object(c.a)(a,[{key:"toggleSubstaskList",value:function(){this.setState({subtaskCollapse:!this.state.subtaskCollapse})}},{key:"getProgressBarValue",value:function(){return this.props.task.subtasks.reduce((function(e,t){return 1===t.status?e+1:e}),0)}},{key:"render",value:function(){var e=this;return n.a.createElement("li",{className:this.props.task.changedColumn?"task-item task-item--moved":"task-item"},n.a.createElement("span",{className:this.state.subtaskCollapse?"task-item-arrow task-item-arrow--collapsed":"task-item-arrow"},"\ud83d\udd3d"),n.a.createElement("p",{className:"task-item-title",title:this.props.task.description,onClick:this.toggleSubstaskList},this.props.task.description),n.a.createElement(b,{value:this.getProgressBarValue(),max:this.props.task.subtasks.length}),n.a.createElement("div",{className:"task-item-options"},n.a.createElement("span",null,"\ud83d\udee0"),n.a.createElement("button",{className:"button",onClick:function(){return e.props.onEdit(e.props.task)}},"\u270d Editar"),n.a.createElement("button",{className:"button",onClick:function(){return e.props.onDelete(e.props.task)}},"\ud83d\uddd1 Excluir")),n.a.createElement("div",{className:this.state.subtaskCollapse?"subtasks subtasks--collapsed":"subtasks"},n.a.createElement(p,{tasks:this.props.task.subtasks,onTaskChange:function(t){return e.props.onTaskChange({parent:e.props.task,subtask:t.subtask,checked:t.checked})}})))}}]),a}(n.a.Component));a(23);var v=function(e){var t=e.tasks.map((function(t){return n.a.createElement(m,{task:t,onTaskChange:e.onTaskChange,onEdit:e.onEditTask,onDelete:e.onDeleteTask,key:t.id})}));return n.a.createElement("div",{className:"task-list-container"},n.a.createElement("ul",{className:"task-list"},t))};a(24);var g=function(e){return n.a.createElement("div",{className:"task-column"},n.a.createElement("h2",null,e.title),n.a.createElement(v,{tasks:e.tasks,onTaskChange:e.onTaskChange,onEditTask:e.onEditTask,onDeleteTask:e.onDeleteTask}))};a(25);var f=function(e){var t=e.show?"dialog dialog--show":"dialog";return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"dialog-content"},n.a.createElement("div",{className:"dialog-header"},n.a.createElement("h3",null,e.title)),n.a.createElement("div",{className:"dialog-body"},e.children),n.a.createElement("div",{className:"dialog-footer"},n.a.createElement("button",{className:"button button-secondary dialog-cancel",onClick:e.onCancel},"Cancel"),n.a.createElement("button",{className:"button button-primary dialog-finish",onClick:e.onFinish},"Finish"))))},E=(a(8),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).handleChange=s.handleChange.bind(Object(u.a)(s)),s}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e;this.props.onChange({name:t.target.id,value:t.target.value})}},{key:"render",value:function(){var e=this.props.value;return n.a.createElement("div",{className:"input ".concat(this.props.isValid?"":"input--invalid")},n.a.createElement("label",{className:"input-label",htmlFor:this.props.name},this.props.label),n.a.createElement("input",{className:"input-target",type:"text",placeholder:this.props.placeholder,id:this.props.name,value:e,onChange:this.handleChange}),!this.props.isValid&&n.a.createElement("p",{className:"input-invalid-message"},this.props.invalidMessage))}}]),a}(n.a.Component)),C=a(31),T=(a(26),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={description:"",isDescriptionValid:!0,validationErrorMessage:""},s.handleChange=s.handleChange.bind(Object(u.a)(s)),s.handleClick=s.handleClick.bind(Object(u.a)(s)),s}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e,a=t.value;switch(t.name){case this.props.name:this.setState({description:a})}}},{key:"validateFields",value:function(){return this.state.description&&""!==this.state.description?!(this.props.value.length>=10)||(this.setState({isDescriptionValid:!1,validationErrorMessage:"There are 10 subtasks already."}),!1):(this.setState({isDescriptionValid:!1,validationErrorMessage:"Description is required."}),!1)}},{key:"handleClick",value:function(){if(this.validateFields()){var e=this.props.value.slice();e.push({id:Object(C.a)(),description:this.state.description,status:0}),this.setState({description:"",isDescriptionValid:!0}),this.props.onChange({name:this.props.name,value:e})}}},{key:"render",value:function(){return n.a.createElement("div",{className:"input ".concat(this.props.isValid?"":"input--invalid")},n.a.createElement("label",{className:"input-label label-with-hint"},this.props.label),n.a.createElement("p",{className:"input-hint"},'Type the subtask description and click "Add".'),n.a.createElement("div",{className:"subtask-form-add-wrapper"},n.a.createElement(E,{placeholder:"Subtask description",name:this.props.name,value:this.state.description,onChange:this.handleChange,isValid:this.state.isDescriptionValid,invalidMessage:this.state.validationErrorMessage}),n.a.createElement("button",{className:"button button-primary",onClick:this.handleClick},"Add")),n.a.createElement("p",{className:"input-hint"},"Maximum number of subtasks is 10."),n.a.createElement(p,{tasks:this.props.value,disabled:!0,removableItems:!0,onRemove:this.props.onRemoveSubtask}),n.a.createElement("p",{className:"input-hint"},"Click the red 'X' to remove an item."),!this.props.isValid&&n.a.createElement("p",{className:"input-invalid-message"},this.props.invalidMessage))}}]),a}(n.a.Component)),S=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={description:"",subtasks:[],isDescriptionValid:!0,isSubtasksValid:!0,descriptionInvalidMessage:"",subtasksInvalidMessage:""},s.handleFinish=s.handleFinish.bind(Object(u.a)(s)),s.handleChange=s.handleChange.bind(Object(u.a)(s)),s.handleRemoveSubtask=s.handleRemoveSubtask.bind(Object(u.a)(s)),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.task&&this.setState({description:this.props.task.description,subtasks:this.props.task.subtasks})}},{key:"validateFields",value:function(){var e=this.state,t=e.description,a=e.subtasks,s=this.state,n=s.isDescriptionValid,i=s.isSubtasksValid,r=s.descriptionInvalidMessage,o=s.subtasksInvalidMessage;return n=!0,i=!0,t&&""!==t||(n=!1,r="Description is required."),(!a||a.length<=0)&&(i=!1,o="At least one subtask is required."),a.length>10&&(i=!1,o="Maximum number of subtasks is 10."),this.setState({isDescriptionValid:n,isSubtasksValid:i,subtasksInvalidMessage:o,descriptionInvalidMessage:r}),n&&i}},{key:"handleFinish",value:function(){var e=this.state,t=e.description,a=e.subtasks;this.validateFields()&&(this.props.onFinish({id:this.props.task?this.props.task.id:Object(C.a)(),description:t,subtasks:a,status:this.props.task?this.props.task.status:0}),this.setState({description:"",subtasks:[],isDescriptionValid:!0,isSubtasksValid:!0}))}},{key:"handleChange",value:function(e){var t=e.value;switch(e.name){case"description":this.setState({description:t});break;case"subtasks":this.setState({subtasks:t})}}},{key:"handleRemoveSubtask",value:function(e){console.log(e);var t=this.state.subtasks.slice(),a=this.state.subtasks.findIndex((function(t){return t.id===e.id}));console.log(a),t.splice(a,1),this.setState({subtasks:t})}},{key:"render",value:function(){return n.a.createElement(f,{title:"\ud83d\udcdd Add a new task",onFinish:this.handleFinish,onCancel:this.props.onCancel,show:this.props.show},n.a.createElement(E,{label:"Task description",name:"description",value:this.state.description,onChange:this.handleChange,isValid:this.state.isDescriptionValid,invalidMessage:this.state.descriptionInvalidMessage}),n.a.createElement(T,{label:"Subtasks",name:"subtasks",value:this.state.subtasks,onChange:this.handleChange,onRemoveSubtask:this.handleRemoveSubtask,isValid:this.state.isSubtasksValid,invalidMessage:this.state.subtasksInvalidMessage}))}}]),a}(n.a.Component),y=a(11),j=a(10),O=[{id:1,description:"Task #1",status:0,changedColumn:!1,subtasks:[{id:1,description:"SubTask #1",status:0},{id:2,description:"SubTask #2",status:0},{id:3,description:"SubTask #3",status:0}]},{id:2,description:"Task #2",status:0,changedColumn:!1,subtasks:[{id:4,description:"SubTask #1",status:0},{id:5,description:"SubTask #2",status:0},{id:6,description:"SubTask #3",status:0}]},{id:3,description:"Task #3",status:1,changedColumn:!1,subtasks:[{id:7,description:"SubTask #1",status:1},{id:8,description:"SubTask #2",status:0},{id:9,description:"SubTask #3",status:0}]},{id:4,description:"Task #4",status:2,changedColumn:!1,subtasks:[{id:10,description:"SubTask #1",status:1},{id:11,description:"SubTask #2",status:1},{id:12,description:"SubTask #3",status:1}]}],w=Object(j.a)("TODO_REACT",1,{upgrade:function(e,t,a,s){switch(a){case 1:e.createObjectStore("Tasks",{keyPath:"id"});var n=s.objectStore("Tasks","readwrite");n.createIndex("id","id",{unique:!0}),n.createIndex("description","description",{unique:!1}),n.createIndex("subtasks","subtasks",{unique:!1}),n.createIndex("status","status",{unique:!1});var i,r=Object(y.a)(O);try{for(r.s();!(i=r.n()).done;){var o=i.value;n.put(o)}}catch(l){r.e(l)}finally{r.f()}}}}),N=function(){function e(t,a){Object(l.a)(this,e),this.scope=t,this.errorHandler=a}return Object(c.a)(e,[{key:"withScope",value:function(e){return this.scope=e,this}},{key:"withErrorHandler",value:function(e){return this.errorHandler=e,this}},{key:"get",value:function(e){var t=this;return this._run((function(a){return a.transaction(t.scope,"readwrite").objectStore(t.scope).get(e)}))}},{key:"getAll",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._run((function(s){return a?s.transaction(t.scope,"readwrite").objectStore(t.scope).index(e).getAll(a):s.transaction(t.scope,"readwrite").objectStore(t.scope).index(e).getAll()}))}},{key:"put",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a?this._run((function(s){return s.transaction(t.scope,"readwrite").objectStore(t.scope).put(e,a)})):this._run((function(a){return a.transaction(t.scope,"readwrite").objectStore(t.scope).put(e)}))}},{key:"delete",value:function(e){var t=this;return this._run((function(a){return a.transaction(t.scope,"readwrite").objectStore(t.scope).delete(e)}))}},{key:"deleteAll",value:function(){var e=this;return this._run((function(t){return t.transaction(e.scope,"readwrite").objectStore(e.scope).clear()}))}},{key:"_run",value:function(e){return w.then(e)}}]),e}(),D=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(l.a)(this,e),window.indexedDB&&(this.storageEngine=new N(t,a))}return Object(c.a)(e,[{key:"get",value:function(e){return this.storageEngine.get(e)}},{key:"getAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.storageEngine.getAll(e,t)}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.storageEngine.put(e,t)}},{key:"delete",value:function(e){return this.delete(e)}},{key:"deleteAll",value:function(){return this.deleteAll()}}]),e}(),V=(a(28),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).handleClick=s.handleClick.bind(Object(u.a)(s)),s.handleFinish=s.handleFinish.bind(Object(u.a)(s)),s.handleCancel=s.handleCancel.bind(Object(u.a)(s)),s.handleTaskChange=s.handleTaskChange.bind(Object(u.a)(s)),s.handleStorageError=s.handleStorageError.bind(Object(u.a)(s)),s.handleEditTask=s.handleEditTask.bind(Object(u.a)(s)),s.handleDeleteTask=s.handleDeleteTask.bind(Object(u.a)(s)),s.storage=new D("Tasks",s.handleStorageError),s.state={tasks:[],showDialog:!1,taskToEdit:null},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.storage.getAll("id").then((function(t){t.forEach((function(e){e.changedColumn=!1})),e.setState({tasks:t})}))}},{key:"handleStorageError",value:function(e){console.log(e)}},{key:"getTasksByState",value:function(e){return this.state.tasks.slice().filter((function(t){return t.status===e}))}},{key:"handleClick",value:function(){this.setState({showDialog:!0})}},{key:"handleFinish",value:function(e){var t=this;this.state.taskToEdit?(this.updateTaskStatus(e),this.storage.put(e).then((function(a){if(a){var s=t.state.tasks.slice(),n=s.findIndex((function(e){return e.id===a}));s[n]=e,t.setState({tasks:s,showDialog:!1})}}))):this.storage.put(e).then((function(a){if(a){var s=t.state.tasks.slice();s.push(e),t.setState({tasks:s,showDialog:!1})}}))}},{key:"handleCancel",value:function(){this.setState({showDialog:!1})}},{key:"getTaskStatus",value:function(e){var t=e.subtasks.reduce((function(e,t){return 1===t.status?e+1:e}),0);return t<=0?0:t>=e.subtasks.length?2:1}},{key:"updateTaskStatus",value:function(e){var t=e.status;e.status=this.getTaskStatus(e),e.changedColumn=t!==e.status}},{key:"handleTaskChange",value:function(e){var t=this,a=this.state.tasks.slice(),s=a.find((function(t){return t.id===e.parent.id}));s.subtasks.find((function(t){return t.id===e.subtask.id})).status=e.checked?1:0,this.updateTaskStatus(s),this.storage.put(s).then((function(e){e&&t.setState(a)}))}},{key:"handleEditTask",value:function(e){this.setState({showDialog:!0,taskToEdit:e})}},{key:"handleDeleteTask",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this.state.showDialog;return n.a.createElement("div",{className:"app-content"},n.a.createElement("button",{className:"button button-secondary button-lg",onClick:this.handleClick},"\ud83d\udccc New task"),n.a.createElement("div",{className:"task-columns"},n.a.createElement(g,{title:"\ud83d\udccc To do",tasks:this.getTasksByState(0),onTaskChange:this.handleTaskChange,onEditTask:this.handleEditTask,onDeleteTask:this.handleDeleteTask}),n.a.createElement(g,{title:"\u23f3 Doing",tasks:this.getTasksByState(1),onTaskChange:this.handleTaskChange,onEditTask:this.handleEditTask,onDeleteTask:this.handleDeleteTask}),n.a.createElement(g,{title:"\u2705 Done",tasks:this.getTasksByState(2),onTaskChange:this.handleTaskChange,onEditTask:this.handleEditTask,onDeleteTask:this.handleDeleteTask})),e&&n.a.createElement(S,{task:this.state.taskToEdit,onFinish:this.handleFinish,onCancel:this.handleCancel}))}}]),a}(n.a.Component));a(29);var M=function(){return n.a.createElement("div",{className:"app"},n.a.createElement(o,null),n.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.e65c2364.chunk.js.map